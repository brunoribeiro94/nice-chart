<!DOCTYPE html>
<html>
    <head>
        <title>Nice Chat Example</title>
      <link href="plugins/font-awesome/css/font-awesome.css" rel="stylesheet"/>
      <link href="css/animate.min.css" rel="stylesheet"/>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
      <script src="plugins/pace/pace.min.js" type="text/javascript"></script>
      <script src="plugins/jquery-scrollbar/jquery.scrollbar.min.js" type="text/javascript"></script>
      <script src="plugins/jquery-numberAnimate/jquery.animateNumbers.js" type="text/javascript"></script>
      <script src="plugins/jquery-ricksaw-chart/js/d3.v2.js"></script>
      <script src="plugins/jquery-ricksaw-chart/js/rickshaw.min.js"></script>
      <script src="plugins/jquery-morris-chart/js/morris.min.js"></script>
      <script src="plugins/jquery-easy-pie-chart/js/jquery.easypiechart.min.js"></script>
      <script src="plugins/jquery-flot/jquery.flot.js"></script>
      <script src="plugins/jquery-flot/jquery.flot.time.min.js"></script>
      <script src="plugins/jquery-flot/jquery.flot.selection.min.js"></script>
      <script src="plugins/jquery-flot/jquery.flot.animator.min.js"></script>
      <script src="plugins/jquery-flot/jquery.flot.orderBars.js"></script>
      <script src="plugins/jquery-sparkline/jquery-sparkline.js"></script>
      <script src="plugins/jquery-easy-pie-chart/js/jquery.easypiechart.min.js"></script>

        </head>
        <body class="">
                <div class="row">
                    <div class="col-md-12">
                        <div class="grid simple">
                            <div class="grid-title no-border">
                                <h4>Morris <span class="semi-bold">Charts</span></h4>
                                <div class="tools"> <a href="javascript:;" class="collapse"></a> <a href="#grid-config" data-toggle="modal" class="config"></a> <a href="javascript:;" class="reload"></a> <a href="javascript:;" class="remove"></a> </div>
                            </div>
                            <div class="grid-body no-border">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h4>Comissões <span class="semi-bold">Diárias</span></h4>
                                        <!-- DATE RANGE PICKER -->
                                        <span class="date-range pull-right">
                                            <div class="btn-group">
                                                <a class="js_update btn btn-default" href="javascript:;">Today</a>
                                                <a class="js_update btn btn-default" href="javascript:;">Last 7 Days</a>
                                                <a class="js_update btn btn-default hidden-xs" href="javascript:;">Last month</a>

                                                <a id="reportrange" class="btn reportrange">
                                                    <i class="fa fa-calendar"></i>
                                                    <span></span>
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                            </div>
                                        </span>
                                        <!-- /DATE RANGE PICKER -->
                                        <p> Valores de comissões pendentes e pagas.
                                            <br> Você pode filtrar o <strong>período de tempo</strong> clicando no botão em forma de engrenagem. Ao clicar nele, aparecerá uma lista de opções disponíveis. </p>

                                        <div id="area-example"> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    <script type="text/javascript">
        $(document).ready(function () {
            var graph_today = [{
                    y: '2006',
                    a: 50,
                    b: 40
                }, {
                    y: '2007',
                    a: 65,
                    b: 55
                }, {
                    y: '2008',
                    a: 50,
                    b: 40
                }, {
                    y: '2009',
                    a: 75,
                    b: 65
                }, {
                    y: '2010',
                    a: 50,
                    b: 40
                }, {
                    y: '2011',
                    a: 75,
                    b: 65
                }, {
                    y: '2012',
                    a: 100,
                    b: 90
                }];

            var graph_last_week = [{
                    y: '2006',
                    a: 350,
                    b: 240
                }, {
                    y: '2007',
                    a: 765,
                    b: 555
                }, {
                    y: '2008',
                    a: 350,
                    b: 240
                }, {
                    y: '2009',
                    a: 675,
                    b: 965
                }, {
                    y: '2010',
                    a: 650,
                    b: 840
                }, {
                    y: '2011',
                    a: 675,
                    b: 465
                }, {
                    y: '2012',
                    a: 3100,
                    b: 190
                }];

            var graph_last_month = [{
                    y: '2006',
                    a: 3350,
                    b: 6240
                }, {
                    y: '2007',
                    a: 4765,
                    b: 2555
                }, {
                    y: '2008',
                    a: 5350,
                    b: 3240
                }, {
                    y: '2009',
                    a: 3675,
                    b: 4965
                }, {
                    y: '2010',
                    a: 5650,
                    b: 7840
                }, {
                    y: '2011',
                    a: 4675,
                    b: 5465
                }, {
                    y: '2012',
                    a: 3100,
                    b: 8190
                }];


            var Render_Graph_Morris = Morris.Line({
                element: 'line-example',
                data: graph_today,
                xkey: 'y',
                ykeys: ['a', 'b'],
                labels: ['Marcela Tavares', 'Aline Gomes'],
                lineColors: ['#0aa699', '#d1dade']
            });


            Morris.Area({
                element: 'area-example',
                data: [{
                        y: '2006',
                        a: 100,
                        b: 90
                    }, {
                        y: '2007',
                        a: 75,
                        b: 65
                    }, {
                        y: '2008',
                        a: 50,
                        b: 40
                    }, {
                        y: '2009',
                        a: 75,
                        b: 65
                    }, {
                        y: '2010',
                        a: 50,
                        b: 40
                    }, {
                        y: '2011',
                        a: 75,
                        b: 65
                    }, {
                        y: '2012',
                        a: 100,
                        b: 90
                    }],
                xkey: 'y',
                ykeys: ['a', 'b'],
                labels: ['Pagas', 'Pendente'],
                lineColors: ['#05720f', '#ff0000'],
                lineWidth: '0',
                grid: 'false',
                fillOpacity: '0.5'
            });


            //Update the charts
            $('.js_update').on('click', function () {
                var value = $(this).attr('data-filter');
                if (value == 0) {
                    $("#line-example").empty();
                    Morris.Line({
                        element: 'line-example',
                        data: graph_today,
                        xkey: 'y',
                        ykeys: ['a', 'b'],
                        labels: ['Marcela Tavares', 'Aline Gomes'],
                        lineColors: ['#0aa699', '#d1dade']
                    });
                } else if (value == 7) {

                    $("#line-example").empty();
                    Morris.Line({
                        element: 'line-example',
                        data: graph_last_week,
                        xkey: 'y',
                        ykeys: ['a', 'b'],
                        labels: ['Marcela Tavares', 'Aline Gomes'],
                        lineColors: ['#0aa699', '#d1dade']
                    });
                } else if (value == 15) {
                    $("#line-example").empty();
                    Morris.Line({
                        element: 'line-example',
                        data: [
                            {a: 124, period: '2014-01-11', name: 'Aline Gomes'},
                            {b: 112, period: '2014-06-20', name: 'Silvana Rosa'},
                            {c: 106, period: '2014-12-09', name: 'Bruno Ribeiro'}
                        ],
                        xkey: 'period',
                        ykeys: ['a', 'b', 'c'],
                        labels: 'name',
                        lineColors: ['#d3f722', '#e291d3', '#5fff4d'],
                        xLabelFormat: function (x) {
                            var IndexToMonth = ["Jan", "Fev", "Mai", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"];
                            var month = IndexToMonth[ x.getMonth() ];
                            var year = x.getFullYear();
                            return month + ' de ' + year;
                        }, dateFormat: function (x) {
                            var IndexToMonth = ["Jan", "Fev", "Mai", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"];
                            var month = IndexToMonth[ new Date(x).getMonth() ];
                            var year = new Date(x).getFullYear();
                            return month + ' de ' + year;
                        }
                    });


                }
                //alert(value);

            });
        });
    </script>
    
    <script>

        /*-----------------------------------------------------------------------------------*/
        /*	Date Range Picker
         /*-----------------------------------------------------------------------------------*/
        var handleDateTimePickers = function () {

            $('#reportrange').daterangepicker(
                    {
                        startDate: moment().subtract('days', 29),
                        endDate: moment(),
                        showDropdowns: true,
                        showWeekNumbers: true,
                        timePicker: false,
                        timePickerIncrement: 1,
                        timePicker12Hour: true,
                        ranges: {
                            'Ontem': [moment().subtract('days', 1), moment().subtract('days', 1)],
                            'Últimos 30 dias': [moment().subtract('days', 29), moment()],
                            'Esse mês': [moment().startOf('month'), moment().endOf('month')]
                        },
                        opens: 'left',
                        buttonClasses: ['btn btn-default'],
                        applyClass: 'btn-small btn-primary',
                        cancelClass: 'btn-small cancel_filter',
                        cancelId: 'cancel_filter',
                        format: 'DD/MM/YYYY',
                        separator: ' para ',
                        locale: {
                            applyLabel: 'Filtrar',
                            cancelLabel: 'Cancelar',
                            fromLabel: 'De',
                            toLabel: 'Até',
                            customRangeLabel: 'Personalizado',
                            daysOfWeek: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
                            monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                            firstDay: 1
                        }
                    },
            function (start, end) {
                var options = {
                    bg: '#0AA599'
                };
                var formatted_start = new Date(start).toISOString();
                var formatted_end = new Date(end).toISOString();

                var nanobar = new Nanobar(options);
                // get data
                nanobar.go(25);
                // start graph
                $.get('Data/getData.php?start=' + formatted_start + '&end=' + formatted_end, function (json_data) {
                    nanobar.go(50);
                    $("#line-example").empty();
                    Morris.Line({
                        element: 'line-example',
                        data: json_data.data,
                        xkey: 'y',
                        ykeys: json_data.keys,
                        labels: json_data.labels,
                        lineColors: json_data.colors
                    });
                    $('#myModalPrev .modal-body').html(html);
                    nanobar.go(100);
                }, 'json');

                $('#reportrange span').html(start.format('D MMMM, YYYY') + ' - ' + end.format('D MMMM, YYYY'));

            }
            );
            //Set the initial state of the picker label
            $('#reportrange span').html('Data');
        };

        handleDateTimePickers(); //Function to display Date Timepicker
    </script>
</body>
</html>
